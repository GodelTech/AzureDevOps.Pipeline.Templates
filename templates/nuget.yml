parameters:
  - name: sonarCloudOrganizationName
    displayName: "Organization name for SonarCloud"
    type: string
    default: ""

steps:
  - task: SonarCloudPrepare@1
    displayName: "Prepare analysis on SonarCloud"
    inputs:
      SonarCloud: "SonarCloud"
      organization: "${{ parameters.sonarCloudOrganizationName }}"
      scannerMode: "MSBuild"
      projectKey: "$(Build.DefinitionName)"
      projectName: "$(Build.DefinitionName)"
      extraProperties: |
        sonar.cs.opencover.reportsPaths="$(Agent.TempDirectory)/**/coverage.opencover.xml"
        sonar.coverage.exclusions="tools/build/*"